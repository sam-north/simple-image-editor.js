/*! simple-image-editor 1.0.0 by: Sam North. Built on 08-29-2018 */
function simpleImageEditor(e){var d,a,t,i,s,c=e||{},o=c.canvasStrokeLineWidth||6,n=!1,l="simple-image",r=0,m={pencil:0,line:1};function u(){i={pX:0,pY:0,X:0,Y:0,beginX:0,beginY:0,endX:0,endY:0}}function v(e){document.getElementById("sie-hp").setAttribute("src",e.target.result),r=0,a.clearRect(0,0,d.width,d.height),document.getElementById("sie-sb").removeAttribute("disabled")}function g(){var e=document.getElementById("sie-hp"),t=e.width/d.width,i=e.height/t,n=d.height-i,s=0<n&&(90===r||180===r)?n:0;a.drawImage(e,0,s,d.width,i)}function p(e){a.save();var t=(r=(r+90)%360)*Math.PI/180;a.clearRect(0,0,d.width,d.height);var i=90===r||180===r?d.width:0,n=180===r||270===r?d.height:0;a.translate(i,n),a.rotate(t),g(),a.rotate(-t),a.translate(-i,n),a.restore()}function h(e){return e.clientX-d.offsetLeft}function b(e){return e.clientY-d.offsetTop}function f(e){i.pX=i.X,i.pY=i.Y,i.X=h(e),i.Y=b(e)}function y(e){u(),i.beginX=h(e),i.beginY=b(e),f(e),n=!0}function E(e){n&&(f(e),s===m.pencil&&(a.beginPath(),a.moveTo(i.pX,i.pY),a.lineTo(i.X,i.Y),a.strokeStyle=t,a.lineWidth=o,a.stroke(),a.closePath()))}function w(e){i.endX=h(e),i.endY=b(e),n&&s===m.line&&(a.beginPath(),a.moveTo(i.beginX,i.beginY),a.lineTo(i.endX,i.endY),a.strokeStyle=t,a.lineWidth=o,a.stroke(),a.closePath()),n=!1,u()}function I(){var e=document.getElementById("sie-cp");t=e.value}function L(){var e=document.getElementById("sie-hsl"),t=c.editedImageAppendedName||"-edited",i=c.editedImageFileType||"png";e.setAttribute("download",l+t+"."+i),e.setAttribute("href",d.toDataURL("image/"+t).replace("image/"+t,"image/octet-stream")),e.click()}function B(e){var t=document.getElementsByClassName("sie-dc");for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n.classList.remove("sie-pc"),n.removeAttribute("disabled")}s=Number(e.target.dataset.value),e.target.setAttribute("disabled","disabled"),e.target.classList.add("sie-pc")}function x(){document.getElementById("sie-lwd").textContent=o}function k(e){o=Number(e.target.value),x()}document.getElementById(c.containerId).innerHTML='<style>.sie-cnt{position:relative;overflow:hidden;margin-bottom:10px;margin-top:10px;text-align:center;border:1px #000 solid}.sie-cnt>img{width:96%;position:absolute;display:block;top:0;left:6px}#sie-cnv:hover{cursor:cell}.sie-ib{display:inline-block}.sie-h{display:none!important}#sie{margin:10px}#sie-cnt{display:hidden}#sie-c{vertical-align:top;min-width:155px;width:155px}#sie-c .sie-cc{margin-top:10px;margin-bottom:10px}.sie-pc{color:#fff;background-color:#494a4f;border:#767676 2px solid}#sie-lw{width:50px}</style><div>Choose a file</div><input id="sie-fu" type="file"><br><div id="sie"><canvas id="sie-cnv" class="sie-cnt"></canvas><div id="sie-cnt" class="sie-cnt sie-h"><img id="sie-hp"> <a id="sie-hsl"></a></div><div id="sie-c" class="sie-h"><div class="sie-cc"><button id="sie-rb">Rotate</button></div><hr><div class="sie-cc"><input id="sie-cp" type="color"> <span>Select color</span></div><div class="sie-cc"><input id="sie-lw" min="1" max="10" type="range"> <span>Line width: <span id="sie-lwd"></span></span></div><div class="sie-cc"><button data-value="0" class="sie-dc">Pencil</button></div><div class="sie-cc"><button data-value="1" class="sie-dc">Line</button></div><hr><div class="sie-cc"><button id="sie-sb" disabled="disabled">Save</button></div></div></div>',u(),document.getElementById("sie-fu").addEventListener("change",function(e){var t=e.target.files[0],i=new FileReader;i.onload=v,i.readAsDataURL(t);var n=t.name.lastIndexOf(".");-1!=n&&(l=t.name.substring(0,n));var s=document.getElementById("sie-c");s.classList.remove("sie-h"),s.classList.add("sie-ib"),function(){document.getElementById("sie-rb").addEventListener("click",p,!1);var e=document.getElementById("sie-lw");e.value=o,e.addEventListener("change",k,!1),x();var t=document.getElementById("sie-cp");t.addEventListener("change",I,!1),t.value=c.canvasStrokeStyle||"#FF0000",I(),d.addEventListener("mousedown",y,!1),d.addEventListener("mousemove",E,!1),d.addEventListener("mouseup",w,!1),d.addEventListener("mouseout",w,!1),document.getElementById("sie-sb").addEventListener("click",L,!1);var i=document.getElementsByClassName("sie-dc");for(var n in i)if(i.hasOwnProperty(n)){var s=i[n];s.addEventListener("click",B,!1)}document.getElementById("sie-c").getElementsByClassName("sie-dc")[0].click()}()},!1),document.getElementById("sie-hp").addEventListener("load",g,!1),(d=document.getElementById("sie-cnv")).width=c.width||300,d.height=c.height||d.width,a=d.getContext("2d")}
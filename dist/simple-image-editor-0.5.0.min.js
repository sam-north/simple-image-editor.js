/*! simple-image-editor 0.5.0 by: Sam North. Built on 08-28-2018 */
function simpleImageEditor(e){var a,d,i,t,l,n,r=6,o=!1,s="simple-image",m=0,g={pencil:0,line:1};function c(){l&&2<=l&&console.log("entered function: simpleImageEditorResetMouseInfo"),t={pX:0,pY:0,X:0,Y:0,beginX:0,beginY:0,endX:0,endY:0}}function p(e){l&&2<=l&&console.log("entered function: simpleImageEditorImageHandler"),document.getElementById("simple-image-editor-hidden-preview").setAttribute("src",e.target.result),m=0,d.clearRect(0,0,a.width,a.height),document.getElementById("simple-image-editor-save-button").removeAttribute("disabled")}function u(){l&&2<=l&&console.log("entered function: simpleImageEditorDrawImageToCanvas");var e=document.getElementById("simple-image-editor-hidden-preview"),i=e.width/a.width,t=e.height/i,o=a.height-t,n=0<o&&(90===m||180===m)?o:0;l&&1<=l&&console.log("heightDifference: "+o,"heightOffset: "+n,"imageProportionScale: "+i,"imageScaledHeight: "+t),d.drawImage(e,0,n,a.width,t)}function v(e){l&&2<=l&&console.log("entered function: simpleImageEditorHandleDrawingControlClick"),d.save();var i=(m=(m+90)%360)*Math.PI/180;l&&1<=l&&console.log("imageRotationAngle: "+m,"radianRotationAngle: "+i),d.clearRect(0,0,a.width,a.height);var t=90===m||180===m?a.width:0,o=180===m||270===m?a.height:0;d.translate(t,o),d.rotate(i),u(),d.rotate(-i),d.translate(-t,o),d.restore()}function h(e){return l&&2<=l&&console.log("entered function: simpleImageEditorGetCurrentMouseX"),e.clientX-a.offsetLeft}function f(e){return l&&2<=l&&console.log("entered function: simpleImageEditorGetCurrentMouseY"),e.clientY-a.offsetTop}function E(e){l&&2<=l&&console.log("entered function: simpleImageEditorSetMouseCoordinates"),t.pX=t.X,t.pY=t.Y,t.X=h(e),t.Y=f(e),l&&1<=l&&console.log("beginX: "+t.beginX,"beginY: "+t.beginY,"previousMouseX: "+t.pX,"previousMouseY: "+t.pY,"mouseX: "+t.X,"mouseY: "+t.Y,"endX: "+t.endX,"endY: "+t.endY)}function b(e){l&&2<=l&&console.log("entered function: simpleImageEditorHandleImageEditorMouseBegin"),c(),t.beginX=h(e),t.beginY=f(e),E(e),o=!0,l&&1<=l&&console.log("isDrawing: "+o)}function I(e){l&&2<=l&&console.log("entered function: simpleImageEditorHandleImageEditorMouseMove"),o&&(E(e),n===g.pencil&&(l&&2<=l&&console.log("entered function: simpleImageEditorDrawPathOnCanvas"),d.beginPath(),d.moveTo(t.pX,t.pY),d.lineTo(t.X,t.Y),d.strokeStyle=i,d.lineWidth=r,d.stroke(),d.closePath()))}function w(e){l&&2<=l&&console.log("entered function: simpleImageEditorHandleImageEditorMouseEnd"),t.endX=h(e),t.endY=f(e),o&&n===g.line&&(l&&2<=l&&console.log("entered function: simpleImageEditorDrawLineOnCanvas"),l&&1<=l&&console.log("beginX: "+t.beginX,"beginY: "+t.beginY,"previousMouseX: "+t.pX,"previousMouseY: "+t.pY,"mouseX: "+t.X,"mouseY: "+t.Y,"endX: "+t.endX,"endY: "+t.endY),d.beginPath(),d.moveTo(t.beginX,t.beginY),d.lineTo(t.endX,t.endY),d.strokeStyle=i,d.lineWidth=r,d.stroke(),d.closePath()),o=!1,c(),l&&1<=l&&console.log("isDrawing: "+o)}function y(){l&&2<=l&&console.log("entered function: simpleImageEditorSetColorForImageEditor");var e=document.getElementById("simple-image-editor-color-picker");i=e.value,l&&1<=l&&console.log("canvasStrokeStyle: "+i)}function X(){l&&2<=l&&console.log("entered function: simpleImageEditorHandleImageEditorSave");var e=document.getElementById("simple-image-editor-hidden-save-link");e.setAttribute("download",s+"-edited.png"),e.setAttribute("href",a.toDataURL("image/png").replace("image/png","image/octet-stream")),e.click()}function Y(e){l&&2<=l&&console.log("entered function: simpleImageEditorHandleDrawingControlClick");var i=document.getElementsByClassName("simple-image-editor-drawing-control");for(var t in i)if(i.hasOwnProperty(t)){var o=i[t];o.classList.remove("simple-image-editor-pressed-control"),o.removeAttribute("disabled")}n=Number(e.target.dataset.value),l&&1<=l&&console.log("currentDrawingControl: "+n),e.target.setAttribute("disabled","disabled"),e.target.classList.add("simple-image-editor-pressed-control")}function L(){l&&2<=l&&console.log("entered function: simpleImageEditorSetLineWidthValueDisplay"),document.getElementById("simple-image-editor-line-width-display").textContent=r}function k(e){l&&2<=l&&console.log("entered function: simpleImageEditorHandleDrawingControlClick"),r=Number(e.target.value),L(),l&&1<=l&&console.log("canvasStrokeLineWidth: "+r)}document.getElementById(e).innerHTML='<style>.simple-image-editor-container{position:relative;overflow:hidden;margin-bottom:10px;margin-top:10px;text-align:center;border:1px #000 solid}.simple-image-editor-container>img{width:96%;position:absolute;display:block;top:0;left:6px}#simple-image-editor-canvas:hover{cursor:cell}.simple-image-editor-inline-block{display:inline-block}.simple-image-editor-hidden{display:none!important}#simple-image-editor{margin:10px}#simple-image-editor-container{display:hidden}#simple-image-editor>#simple-image-editor-controls{vertical-align:top;min-width:155px;width:155px}#simple-image-editor>#simple-image-editor-controls .simple-image-editor-control-container{margin-top:10px;margin-bottom:10px}.simple-image-editor-pressed-control{color:#fff;background-color:#494a4f;border:#767676 2px solid}#simple-image-editor-line-width{width:50px}</style><div>Choose a file</div><input id="simple-image-editor-upload" type="file"><br><div id="simple-image-editor"><canvas id="simple-image-editor-canvas" class="simple-image-editor-container"></canvas><div id="simple-image-editor-container" class="simple-image-editor-container simple-image-editor-hidden"><img id="simple-image-editor-hidden-preview"> <a id="simple-image-editor-hidden-save-link"></a></div><div id="simple-image-editor-controls" class="simple-image-editor-hidden"><div class="simple-image-editor-control-container"><button id="simple-image-editor-rotate-button">Rotate</button></div><hr><div class="simple-image-editor-control-container"><input id="simple-image-editor-color-picker" type="color"> <span>Select color</span></div><div class="simple-image-editor-control-container"><input id="simple-image-editor-line-width" min="1" max="10" type="range"> <span>Line width: <span id="simple-image-editor-line-width-display"></span></span></div><div class="simple-image-editor-control-container"><button data-value="0" class="simple-image-editor-drawing-control">Pencil</button></div><div class="simple-image-editor-control-container"><button data-value="1" class="simple-image-editor-drawing-control">Line</button></div><hr><div class="simple-image-editor-control-container"><button id="simple-image-editor-save-button" disabled="disabled">Save</button></div></div></div>',c(),document.getElementById("simple-image-editor-upload").addEventListener("change",function(e){l&&2<=l&&console.log("entered function: simpleImageEditorLoadimage");var i=e.target.files[0],t=new FileReader;t.onload=p,t.readAsDataURL(i),l&&1<=l&&console.log("fileName: "+i.name);var o=i.name.lastIndexOf(".");-1!=o&&(s=i.name.substring(0,o)),l&&1<=l&&console.log("uneditedImageFileNameNoExtension: "+s);var n=document.getElementById("simple-image-editor-controls");n.classList.remove("simple-image-editor-hidden"),n.classList.add("simple-image-editor-inline-block"),function(){document.getElementById("simple-image-editor-rotate-button").addEventListener("click",v,!1);var e=document.getElementById("simple-image-editor-line-width");e.value=r,e.addEventListener("change",k,!1),L();var i=document.getElementById("simple-image-editor-color-picker");i.addEventListener("change",y,!1),i.value="#FF0000",y(),a.addEventListener("mousedown",b,!1),a.addEventListener("mousemove",I,!1),a.addEventListener("mouseup",w,!1),a.addEventListener("mouseout",w,!1),document.getElementById("simple-image-editor-save-button").addEventListener("click",X,!1);var t=document.getElementsByClassName("simple-image-editor-drawing-control");for(var o in t)if(t.hasOwnProperty(o)){var n=t[o];n.addEventListener("click",Y,!1)}document.getElementById("simple-image-editor-controls").getElementsByClassName("simple-image-editor-drawing-control")[0].click()}()},!1),document.getElementById("simple-image-editor-hidden-preview").addEventListener("load",u,!1),(a=document.getElementById("simple-image-editor-canvas")).width=300,a.height=a.width,d=a.getContext("2d"),l=0}simpleImageEditor("image-editor-container");
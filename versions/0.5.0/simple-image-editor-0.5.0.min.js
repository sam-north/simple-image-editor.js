/*! simple-image-editor 0.5.0 by: Sam North. Built on 08-28-2018 */
window.onload=function(){var l,d,t,n,a,i,r=6,o=!1,s="simple-image",m=0,g={pencil:0,line:1};function c(){a&&2<=a&&console.log("entered function: simpleImageEditorResetMouseInfo"),n={pX:0,pY:0,X:0,Y:0,beginX:0,beginY:0,endX:0,endY:0}}function u(e){a&&2<=a&&console.log("entered function: simpleImageEditorImageHandler"),document.getElementById("simple-image-editor-hidden-preview").setAttribute("src",e.target.result),m=0,d.clearRect(0,0,l.width,l.height),document.getElementById("simple-image-editor-save-button").removeAttribute("disabled")}function p(){a&&2<=a&&console.log("entered function: simpleImageEditorDrawImageToCanvas");var e=document.getElementById("simple-image-editor-hidden-preview"),t=e.width/l.width,n=e.height/t,o=l.height-n,i=0<o&&(90===m||180===m)?o:0;a&&1<=a&&console.log("heightDifference: "+o,"heightOffset: "+i,"imageProportionScale: "+t,"imageScaledHeight: "+n),d.drawImage(e,0,i,l.width,n)}function v(e){a&&2<=a&&console.log("entered function: simpleImageEditorHandleDrawingControlClick"),d.save();var t=(m=(m+90)%360)*Math.PI/180;a&&1<=a&&console.log("imageRotationAngle: "+m,"radianRotationAngle: "+t),d.clearRect(0,0,l.width,l.height);var n=90===m||180===m?l.width:0,o=180===m||270===m?l.height:0;d.translate(n,o),d.rotate(t),p(),d.rotate(-t),d.translate(-n,o),d.restore()}function f(e){return a&&2<=a&&console.log("entered function: simpleImageEditorGetCurrentMouseX"),e.clientX-l.offsetLeft}function E(e){return a&&2<=a&&console.log("entered function: simpleImageEditorGetCurrentMouseY"),e.clientY-l.offsetTop}function h(e){a&&2<=a&&console.log("entered function: simpleImageEditorSetMouseCoordinates"),n.pX=n.X,n.pY=n.Y,n.X=f(e),n.Y=E(e),a&&1<=a&&console.log("beginX: "+n.beginX,"beginY: "+n.beginY,"previousMouseX: "+n.pX,"previousMouseY: "+n.pY,"mouseX: "+n.X,"mouseY: "+n.Y,"endX: "+n.endX,"endY: "+n.endY)}function I(e){a&&2<=a&&console.log("entered function: simpleImageEditorHandleImageEditorMouseBegin"),c(),n.beginX=f(e),n.beginY=E(e),h(e),o=!0,a&&1<=a&&console.log("isDrawing: "+o)}function b(e){a&&2<=a&&console.log("entered function: simpleImageEditorHandleImageEditorMouseMove"),o&&(h(e),i===g.pencil&&(a&&2<=a&&console.log("entered function: simpleImageEditorDrawPathOnCanvas"),d.beginPath(),d.moveTo(n.pX,n.pY),d.lineTo(n.X,n.Y),d.strokeStyle=t,d.lineWidth=r,d.stroke(),d.closePath()))}function w(e){a&&2<=a&&console.log("entered function: simpleImageEditorHandleImageEditorMouseEnd"),n.endX=f(e),n.endY=E(e),o&&i===g.line&&(a&&2<=a&&console.log("entered function: simpleImageEditorDrawLineOnCanvas"),a&&1<=a&&console.log("beginX: "+n.beginX,"beginY: "+n.beginY,"previousMouseX: "+n.pX,"previousMouseY: "+n.pY,"mouseX: "+n.X,"mouseY: "+n.Y,"endX: "+n.endX,"endY: "+n.endY),d.beginPath(),d.moveTo(n.beginX,n.beginY),d.lineTo(n.endX,n.endY),d.strokeStyle=t,d.lineWidth=r,d.stroke(),d.closePath()),o=!1,c(),a&&1<=a&&console.log("isDrawing: "+o)}function X(){a&&2<=a&&console.log("entered function: simpleImageEditorSetColorForImageEditor");var e=document.getElementById("simple-image-editor-color-picker");t=e.value,a&&1<=a&&console.log("canvasStrokeStyle: "+t)}function Y(){a&&2<=a&&console.log("entered function: simpleImageEditorHandleImageEditorSave");var e=document.getElementById("simple-image-editor-hidden-save-link");e.setAttribute("download",s+"-edited.png"),e.setAttribute("href",l.toDataURL("image/png").replace("image/png","image/octet-stream")),e.click()}function y(e){a&&2<=a&&console.log("entered function: simpleImageEditorHandleDrawingControlClick");var t=document.getElementsByClassName("simple-image-editor-drawing-control");for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];o.classList.remove("simple-image-editor-pressed-control"),o.removeAttribute("disabled")}i=Number(e.target.dataset.value),a&&1<=a&&console.log("currentDrawingControl: "+i),e.target.setAttribute("disabled","disabled"),e.target.classList.add("simple-image-editor-pressed-control")}function L(){a&&2<=a&&console.log("entered function: simpleImageEditorSetLineWidthValueDisplay"),document.getElementById("simple-image-editor-line-width-display").textContent=r}function B(e){a&&2<=a&&console.log("entered function: simpleImageEditorHandleDrawingControlClick"),r=Number(e.target.value),L(),a&&1<=a&&console.log("canvasStrokeLineWidth: "+r)}c(),document.getElementById("simple-image-editor-upload").addEventListener("change",function(e){a&&2<=a&&console.log("entered function: simpleImageEditorLoadimage");var t=e.target.files[0],n=new FileReader;n.onload=u,n.readAsDataURL(t),a&&1<=a&&console.log("fileName: "+t.name);var o=t.name.lastIndexOf(".");-1!=o&&(s=t.name.substring(0,o)),a&&1<=a&&console.log("uneditedImageFileNameNoExtension: "+s);var i=document.getElementById("simple-image-editor-controls");i.classList.remove("simple-image-editor-hidden"),i.classList.add("simple-image-editor-inline-block"),function(){document.getElementById("simple-image-editor-rotate-button").addEventListener("click",v,!1);var e=document.getElementById("simple-image-editor-line-width");e.value=r,e.addEventListener("change",B,!1),L();var t=document.getElementById("simple-image-editor-color-picker");t.addEventListener("change",X,!1),t.value="#FF0000",X(),l.addEventListener("mousedown",I,!1),l.addEventListener("mousemove",b,!1),l.addEventListener("mouseup",w,!1),l.addEventListener("mouseout",w,!1),document.getElementById("simple-image-editor-save-button").addEventListener("click",Y,!1);var n=document.getElementsByClassName("simple-image-editor-drawing-control");for(var o in n)if(n.hasOwnProperty(o)){var i=n[o];i.addEventListener("click",y,!1)}document.getElementById("simple-image-editor-controls").getElementsByClassName("simple-image-editor-drawing-control")[0].click()}()},!1),document.getElementById("simple-image-editor-hidden-preview").addEventListener("load",p,!1),(l=document.getElementById("simple-image-editor-canvas")).width=300,l.height=l.width,d=l.getContext("2d"),a=0};